# 纹身移除价格计算器 - 产品需求文档 (PRD)

## 1. 项目概述

### 1.1 项目背景
随着纹身文化的普及，越来越多的人选择纹身作为自我表达的方式。然而，由于各种原因（职业需求、审美变化、健康考虑等），许多人需要移除身上的纹身。纹身移除是一个复杂且昂贵的过程，用户往往缺乏对价格和过程的了解。**此外，用户在决策前常会搜索关于移除成本、所需时间、疼痛程度以及是否存在家庭移除的可能性等问题，这表明他们需要一个全面且可信赖的信息来源。**

### 1.2 项目目标
开发一个在线纹身移除价格计算器，帮助用户：
- 快速估算纹身移除的成本
- 了解影响价格的各种因素
- 获得专业的建议和指导
- 找到合适的纹身移除服务提供商
- **通过专业博客内容建立用户信任和权威性**

### 1.3 目标用户
- 想要移除永久性纹身的个人
- 对纹身移除价格感兴趣的用户
- **对临时纹身或假纹身移除有需求，或正在探索家庭移除方法的个人**
- 纹身移除诊所和医生（作为参考工具）
- **寻求专业知识和经验的用户**

## 2. 功能需求

### 2.1 核心功能

#### 2.1.1 价格计算器
- **纹身尺寸计算**：用户可以通过上传图片或手动输入尺寸来估算纹身面积
- **颜色复杂度分析**：识别纹身颜色数量，评估移除难度
- **位置因素**：考虑纹身位置对价格的影响（如面部、手部等敏感区域）
- **纹身年龄**：考虑纹身存在时间对移除效果的影响
- **皮肤类型**：根据用户皮肤类型调整价格估算

#### 2.1.2 治疗方案选择
- **激光移除**：最常用的方法，适用于大多数纹身
- **手术切除**：适用于小面积纹身
- **其他方法**：如化学剥离等
- **治疗次数估算**：根据纹身特征估算所需治疗次数
- **效果预期**：提供不同治疗方法的成功率预估，回应"will tattoo removal work"等效果相关问题

#### 2.1.3 价格估算
- **基础价格计算**：根据面积、颜色、位置等因素
- **治疗次数调整**：多次治疗的价格计算
- **地区价格差异**：考虑不同城市的价格水平
- **诊所等级**：不同等级诊所的价格差异
- **价格透明度**：提供详细的价格明细，包括单次治疗费用、总费用预估、分期付款选项等，直接回应"how much does tattoo removal cost"、"how expensive is tattoo removal"等价格相关问题

#### 2.1.4 博客系统
- **博客首页**：展示最新文章、热门话题、分类导航
- **文章内页**：详细的内容展示页面，包含相关文章推荐
- **分类系统**：按主题分类（如激光治疗、护理指南、案例分享等）
- **搜索功能**：支持关键词搜索和标签筛选
- **分享功能**：社交媒体分享和收藏

### 2.2 辅助功能

#### 2.2.1 用户教育
- **纹身移除知识库**：提供相关知识和注意事项
  - **过程详解**：详细介绍纹身移除的完整流程，包括咨询、准备、治疗步骤、恢复期等，并提供不同类型纹身（如彩色、黑色、旧纹身）的预期治疗次数和时间范围，直接回应"how many sessions"、"how long does it take"、"how does tattoo removal work"等问题。
  - **疼痛与风险管理**：明确说明纹身移除过程中的疼痛感（如激光治疗的感受），提供疼痛管理建议。详细列出可能的副作用和风险（如疤痕、色素沉着/脱失），并提供预防和处理措施，回应"does tattoo removal hurt"、"is tattoo removal painful"、"does tattoo removal leave scars"等问题。
  - **家庭移除与临时纹身**：针对用户常搜索的"在家移除纹身"、"临时纹身移除"、"假纹身移除"等问题，提供专业的解答和建议。明确指出家庭移除永久性纹身的风险和无效性，并提供安全移除临时/假纹身的方法，回应"how to remove tattoo at home"、"how to remove temporary tattoos"、"how to remove fake tattoos"等问题。
- **治疗过程说明**：详细介绍各种治疗方法
- **风险提示**：说明可能的副作用和风险
- **护理指导**：提供术后护理建议

#### 2.2.2 诊所推荐
- **地理位置筛选**：根据用户位置推荐附近诊所
- **用户评价系统**：显示诊所评分和用户评价
- **价格对比**：不同诊所的价格对比
- **预约功能**：直接预约咨询或治疗
- **专业认证**：显示诊所和医生的专业资质，增强用户信任度

### 2.3 用户注册/登录（仅 Google，基于 Supabase）

#### 2.3.1 目标与范围
- 提供最小可行的账户体系：仅支持使用 Google 账户注册与登录（OAuth）
- 不支持邮箱/密码、手机号、Apple/其他第三方登录；不做账号合并（后续阶段评估）
- 登录后为用户提供：收藏文章、保存计算器结果、基本偏好同步（预留）

#### 2.3.2 用户故事
- 作为访客，我可以使用 Google 一键登录/注册，完成首次注册并进入站点
- 作为已登录用户，我可以在再次访问时保持登录状态，无需重复授权
- 作为安全敏感用户，我可以随时登出并清除本地会话

#### 2.3.3 关键流程（最小闭环）
1) Google 登录/注册入口点击（Header 或需要登录的行为触发）
2) 跳转 Google OAuth 授权 → 回调到 `/auth/callback`
3) Supabase 完成会话创建，前端收到会话信息并设置持久化
4) 登录/注册成功落地（回到来源页），展示 toast 与用户头像
5) 失败场景：授权取消/错误 → 回到来源页，提示重试/更换账号

#### 2.3.4 功能与状态
- 登录/注册：统一通过 Google OAuth 完成，仅支持 Google
- 登出：清除 Supabase 会话并刷新 UI
- 会话保持：使用 Supabase SSR/客户端会话读取，默认 7 天有效（以 Supabase 策略为准）
- 受保护操作：未登录触发登录弹出或引导

#### 2.3.5 UI 最小规格
- Header：显示“Sign in”按钮；登录后显示用户头像、溢出菜单（Profile 占位、Sign out）
- 按钮状态：加载中（OAuth 重定向前），禁用重复点击
- 提示：登录/注册成功或失败 toast（英文）

#### 2.3.6 边界与异常
- 授权取消：提示“已取消授权”，允许重试
- 第三方 Cookie 受限：提示使用同窗口跳转而非弹窗
- 多标签页会话同步：使用 Supabase 内置监听；若失败则在关键交互前刷新会话
- 地域/网络受限：捕获 `popup_closed`、`timeout`、`access_denied` 等错误码

#### 2.3.7 合规与隐私
- 仅存储最小必要的用户标识（`id`、`email`、`name`、`avatar_url`）
- 遵循 Google OAuth 品牌与文案规范
- 提供隐私政策更新说明与数据删除渠道（邮件联系或后续自助）

#### 2.3.8 非目标（此阶段不做）
- 邮箱/密码注册与登录、短信登录、Apple/Facebook/GitHub 等其他提供商
- 多身份提供商绑定/合并
- 细粒度权限/角色体系

## 3. 博客内页设计详细规格

### 3.1 页面结构设计

#### 3.1.1 文章头部区域
- **标题区域**：大标题、副标题、作者信息、发布时间
- **特色图片**：高质量的相关图片，支持响应式显示
- **阅读时间估算**：显示预计阅读时间
- **分类标签**：文章所属分类和标签
- **分享按钮**：社交媒体分享功能

#### 3.1.2 文章内容区域
- **正文内容**：清晰的排版，支持富文本格式
- **图片展示**：高质量图片，支持点击放大
- **引用块**：突出重要信息或专家观点
- **列表和表格**：结构化信息展示
- **相关链接**：指向计算器或其他相关页面

#### 3.1.3 文章底部区域
- **作者简介**：作者专业背景和联系方式
- **相关文章推荐**：基于标签和分类的相关文章
- **订阅提示**：鼓励用户订阅博客更新

### 3.2 内容类型规划

#### 3.2.1 教育类文章
- **激光治疗详解**：不同激光类型、适用场景、效果对比
- **护理指南**：术前准备、术后护理、注意事项
- **风险科普**：副作用、并发症、预防措施
- **技术发展**：最新治疗技术和设备介绍

#### 3.2.2 案例分享类
- **成功案例**：真实治疗案例展示
- **前后对比**：治疗效果对比图片
- **患者故事**：患者经历和感受分享
- **专家访谈**：医生专业观点和建议

#### 3.2.3 实用指南类
- **选择诊所指南**：如何选择靠谱的诊所
- **价格分析**：不同地区、不同诊所的价格对比
- **保险指南**：医疗保险覆盖情况
- **法律知识**：相关法律法规和权益保护

### 3.3 用户体验设计

#### 3.3.1 阅读体验优化
- **字体选择**：清晰易读的字体，合适的行间距
- **颜色搭配**：舒适的配色方案，支持深色模式
- **响应式设计**：适配各种设备屏幕
- **阅读进度条**：显示阅读进度

#### 3.3.2 互动功能
- **点赞功能**：用户对文章的评价
- **收藏功能**：用户收藏感兴趣的文章
- **相关推荐**：基于标签的简单推荐算法

#### 3.3.3 SEO优化
- **结构化数据**：支持搜索引擎理解内容
- **关键词优化**：针对用户搜索习惯优化
- **内部链接**：合理的内部链接结构
- **图片优化**：图片ALT标签和压缩优化

### 3.4 技术实现要求

#### 3.4.1 内容管理
- **静态内容**：使用Markdown文件存储文章内容
- **图片管理**：图片存储在public目录，支持优化
- **元数据管理**：使用Front Matter管理文章信息

#### 3.4.2 性能优化
- **静态生成**：预生成静态页面
- **图片优化**：使用Next.js Image组件
- **缓存策略**：合理的缓存机制

#### 3.4.3 数据分析
- **阅读统计**：文章阅读量、停留时间
- **转化追踪**：从博客到计算器的转化率
- **SEO效果**：搜索引擎排名和流量

## 4. 用户需求分析

### 4.1 搜索行为分析
基于用户搜索关键词分析，用户关注点主要集中在以下四个方面：

#### 4.1.1 价格透明度（主导需求）
- **核心问题**："how much does tattoo removal cost"、"how expensive is tattoo removal"
- **用户痛点**：缺乏清晰的价格信息，担心隐藏费用
- **解决方案**：提供详细的价格明细，包括基础费用、治疗次数、地区差异等

#### 4.1.2 过程与效果
- **核心问题**："how many sessions to remove tattoo"、"how long does tattoo removal take"、"will tattoo removal work"
- **用户痛点**：对治疗过程不了解，担心效果不佳
- **解决方案**：详细说明治疗流程、时间预期、成功率等

#### 4.1.3 疼痛与风险
- **核心问题**："does tattoo removal hurt"、"does tattoo removal leave scars"
- **用户痛点**：担心疼痛和副作用
- **解决方案**：客观说明疼痛程度，提供风险管理和缓解建议

#### 4.1.4 方法与替代方案
- **核心问题**："how to remove tattoo at home"、"how to remove temporary tattoos"
- **用户痛点**：寻求更经济或便捷的替代方案
- **解决方案**：提供专业建议，引导用户选择安全有效的方法

### 4.2 用户场景分析
- **价格敏感型用户**：主要关注成本，需要详细的价格对比
- **效果导向型用户**：关注治疗成功率和效果预期
- **风险规避型用户**：需要详细的疼痛和风险说明
- **探索型用户**：寻求各种可能的解决方案
- **学习型用户**：通过博客内容深入了解相关知识

## 5. 技术架构

### 5.1 前端技术栈
- **框架**：Next.js (React)
- **样式**：Tailwind CSS
- **状态管理**：React Hooks
- **图片处理**：Canvas API

### 5.2 后端技术栈
- **API框架**：Next.js API Routes
- **数据库**：PostgreSQL
- **图片存储**：AWS S3
- **部署**：Vercel

### 5.3 认证与权限
- **身份提供商**：Supabase Auth（Provider：Google）
- **回调路由**：`/auth/callback`（已预留目录），登录与登出在客户端触发
- **会话策略**：
  - 客户端：Supabase JS 自动管理；跨标签页事件同步
  - 服务端（可选）：SSR 读取会话用于渲染个性化（后续阶段评估）
- **环境变量**：
  - `NEXT_PUBLIC_SUPABASE_URL`
  - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
  - Google OAuth Client ID/Secret 在 Supabase 控制台配置
- **安全**：
  - 限制必要的 `redirect URI`（生产/预发/本地）
  - 仅最小化范围（profile/email）
  - 失败与重放保护：状态参数校验由 Supabase 处理

## 6. 开发计划

### 6.1 第一阶段（MVP）- 4周
- 基础价格计算器
- 简单的用户界面
- 核心计算逻辑
- 基础数据存储
- **价格透明度功能**：详细的价格明细展示
- **基础知识库**：常见问题解答

### 6.2 第二阶段 - 3周
- 图片上传和分析
- 用户账户系统
- 诊所推荐功能
- 移动端优化
- **疼痛与风险管理内容**：详细的疼痛说明和风险提示
- **家庭移除指导**：针对临时纹身和DIY方法的专业建议
- **博客系统基础功能**：文章展示、分类、搜索

（用户账户系统-拆解）
- 集成 Supabase Auth（Google）并完成 OAuth 回调
- 前端登录/登出入口与状态管理（Header 头像、菜单）
- 会话保持与错误处理（取消、失败、超时）
- 受保护操作门禁（收藏/保存结果触发登录）

### 6.3 第三阶段 - 3周
- 知识库系统
- 用户评价系统
- 高级功能
- 性能优化
- **效果预期系统**：不同治疗方法的成功率展示
- **专业认证系统**：诊所和医生资质验证
- **博客基础功能**：文章展示、分类、搜索

### 6.4 第四阶段 - 2周
- **博客内容建设**：专业文章撰写和发布
- **SEO优化**：搜索引擎优化和内容营销
- **用户反馈收集**：用户调研和功能迭代

## 7. 成功指标

### 7.1 用户指标
- 日活跃用户数
- 用户留存率
- 计算器使用次数
- 用户满意度
- **搜索关键词匹配度**：用户搜索行为与平台内容的匹配程度
- **问题解决率**：用户常见问题在平台上的解决率
- **博客阅读量**：文章阅读量和用户参与度
- **登录转化率**：点击登录到完成 OAuth 的比例
- **OAuth 成功率**：第三方登录成功/失败分布
- **平均登录时长**：从点击到回到来源页的耗时

### 7.2 业务指标
- 转化率（计算到咨询）
- 收入增长
- 市场份额
- 品牌知名度
- **用户信任度**：基于专业内容提供的用户信任评分
- **内容覆盖度**：平台内容对用户搜索关键词的覆盖程度
- **SEO排名**：搜索引擎排名和有机流量增长

## 8. 附录：认证 UI 规格与验收标准（仅 Google）

- Header 右上角：
  - 未登录：按钮文案「Sign in」
  - 已登录：显示用户头像；点击展开菜单项「Profile（占位）」「Sign out」
- 受保护操作统一触发登录：

### 8.2 交互与状态
- 点击登录按钮 → 进入 OAuth 跳转（同窗口），按钮置为加载态，禁用重复点击
- 登录/注册成功：
  - 回到来源页，右上角显示头像
  - 展示 toast：「Signed in with Google」
- 登录失败/取消：
  - 回到来源页，展示 toast：「Sign-in failed or cancelled. Please try again.」
  - 按钮恢复可点击
- 登出：
  - 立即清除会话并刷新 UI
  - 展示 toast：「Signed out」

### 8.3 文案规范（英文）
- 主按钮：
  - 未登录：
    - Desktop：
      - 主文案：Sign in
    - Mobile：
      - 主文案：Sign in
- Toast：
  - 成功：Signed in with Google
  - 失败：Sign-in failed or cancelled. Please try again.
  - 登出：Signed out

### 8.4 错误与边界提示
- `popup_closed` / `access_denied` / `timeout`：统一提示失败文案（见 8.3）
- 第三方 Cookie 受限：同窗口重定向策略，无弹窗依赖
- 多标签页：会话自动同步；若不同步，在触发受保护操作时刷新会话

### 8.5 验收标准（MVP）
- 仅 Google 登录路径可见且可用；不存在其它登录方式入口
- 未登录执行任一受保护操作时，必定引导至 Google 登录；登录后回到来源页并恢复原操作上下文（至少回到同页面）
- 成功/失败/登出均有对应 toast 反馈
- Header 状态准确反映会话（按钮 ↔ 头像）

### 8.6 埋点（可选，T+1）
- `auth_click_google`（位置：header | gate）
- `auth_success_google`（耗时 ms）
- `auth_failure_google`（错误码）
- `auth_logout`

---

**文档版本**：v1.2  
**创建日期**：2025年7月  
**负责人**：产品团队  
**更新日期**：2025年11月（新增登录/注册：Supabase + Google）